cpu "8085.tbl"
hof "int8"

org 9000H		;MAIN EXECUTION SEQUENCE
MVI A, 8BH
OUT 43H

LHLD 9300H
MVI D, 00H
MVI E, 08H
CALL MOD16
LDA 9200H
OUT 40H

RST 5

DELAY1:
PUSH D
PUSH B
MVI C, 0AH
LOOP:         
MVI D, 64H
LOOP1:       
MVI E, 0DEH
LOOP2:       
DCR E
JNZ LOOP2
MOV A, D
STA 9300H			;CLOCK PARAMETER
DCR D
JNZ LOOP1
DCR C
JNZ LOOP
POP B
POP D
RET

MOD16:
MVI A, 00H
STA 9200H
STA 9201H
LOP222:
MOV A,L
SUB E
MOV L,A
MOV A,H
SBB D
MOV H,A
JC LOOP322
CPI 00H
JNZ TEMP1122
MOV A, L
CPI 00H
JZ LOP422
TEMP1122:
INX B
JMP LOP222
LOOP322:DAD D
LOP422:
SHLD 9200H
RET